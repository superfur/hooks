"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[803],{2779:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>l,metadata:()=>r,toc:()=>c});var t=s(4848),i=s(8453);const l={id:"useOnlineStatus",title:"useOnlineStatus"},o="useOnlineStatus",r={id:"hooks/useOnlineStatus",title:"useOnlineStatus",description:"useOnlineStatus \u662f\u4e00\u4e2a\u7528\u4e8e\u8ddf\u8e2a\u7528\u6237\u5728\u7ebf\u72b6\u6001\u7684\u94a9\u5b50\u3002\u5b83\u80fd\u591f\u5b9e\u65f6\u76d1\u6d4b\u7528\u6237\u7684\u7f51\u7edc\u8fde\u63a5\u72b6\u6001\u53d8\u5316\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u8868\u793a\u5f53\u524d\u5728\u7ebf\u72b6\u6001\u7684\u5e03\u5c14\u503c\u3002",source:"@site/docs/hooks/useOnlineStatus.md",sourceDirName:"hooks",slug:"/hooks/useOnlineStatus",permalink:"/hooks/hooks/useOnlineStatus",draft:!1,unlisted:!1,editUrl:"https://github.com/superfur/hooks/edit/main/website/docs/hooks/useOnlineStatus.md",tags:[],version:"current",frontMatter:{id:"useOnlineStatus",title:"useOnlineStatus"},sidebar:"hooksSidebar",previous:{title:"useClippy",permalink:"/hooks/hooks/useClippy"},next:{title:"useDocumentTitle",permalink:"/hooks/hooks/useDocumentTitle"}},d={},c=[{value:"\u7528\u6cd5 / Usage",id:"\u7528\u6cd5--usage",level:2},{value:"React",id:"react",level:3},{value:"Vue",id:"vue",level:3},{value:"Solid",id:"solid",level:3},{value:"API",id:"api",level:2},{value:"\u8fd4\u56de\u503c / Return Value",id:"\u8fd4\u56de\u503c--return-value",level:3},{value:"\u5b9e\u73b0\u7ec6\u8282 / Implementation Details",id:"\u5b9e\u73b0\u7ec6\u8282--implementation-details",level:2},{value:"React \u5b9e\u73b0 / React Implementation",id:"react-\u5b9e\u73b0--react-implementation",level:3},{value:"Vue \u5b9e\u73b0 / Vue Implementation",id:"vue-\u5b9e\u73b0--vue-implementation",level:3},{value:"Solid \u5b9e\u73b0 / Solid Implementation",id:"solid-\u5b9e\u73b0--solid-implementation",level:3},{value:"\u6ce8\u610f\u4e8b\u9879 / Notes",id:"\u6ce8\u610f\u4e8b\u9879--notes",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"useonlinestatus",children:"useOnlineStatus"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"useOnlineStatus"})," \u662f\u4e00\u4e2a\u7528\u4e8e\u8ddf\u8e2a\u7528\u6237\u5728\u7ebf\u72b6\u6001\u7684\u94a9\u5b50\u3002\u5b83\u80fd\u591f\u5b9e\u65f6\u76d1\u6d4b\u7528\u6237\u7684\u7f51\u7edc\u8fde\u63a5\u72b6\u6001\u53d8\u5316\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u8868\u793a\u5f53\u524d\u5728\u7ebf\u72b6\u6001\u7684\u5e03\u5c14\u503c\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"useOnlineStatus"})," is a hook for tracking the user's online status. It monitors network connection status changes in real-time and returns a boolean value representing the current online status."]}),"\n",(0,t.jsx)(n.h2,{id:"\u7528\u6cd5--usage",children:"\u7528\u6cd5 / Usage"}),"\n",(0,t.jsx)(n.h3,{id:"react",children:"React"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-jsx",children:"import { useOnlineStatus } from '@septem/hooks/react';\n\nfunction NetworkStatus() {\n  // \u83b7\u53d6\u5f53\u524d\u5728\u7ebf\u72b6\u6001\n  // Get current online status\n  const isOnline = useOnlineStatus();\n  \n  return (\n    <div>\n      <h2>\u7f51\u7edc\u72b6\u6001 / Network Status</h2>\n      <div style={{ color: isOnline ? 'green' : 'red' }}>\n        {isOnline ? '\u5728\u7ebf / Online' : '\u79bb\u7ebf / Offline'}\n      </div>\n    </div>\n  );\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"vue",children:"Vue"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-vue",children:"<script setup>\nimport { useOnlineStatus } from '@septem/hooks/vue';\n\n// \u83b7\u53d6\u5f53\u524d\u5728\u7ebf\u72b6\u6001\n// Get current online status\nconst isOnline = useOnlineStatus();\n<\/script>\n\n<template>\n  <div>\n    <h2>\u7f51\u7edc\u72b6\u6001 / Network Status</h2>\n    <div :style=\"{ color: isOnline ? 'green' : 'red' }\">\n      {{ isOnline ? '\u5728\u7ebf / Online' : '\u79bb\u7ebf / Offline' }}\n    </div>\n  </div>\n</template>\n"})}),"\n",(0,t.jsx)(n.h3,{id:"solid",children:"Solid"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-jsx",children:"import { useOnlineStatus } from '@septem/hooks/solid';\n\nfunction NetworkStatus() {\n  // \u83b7\u53d6\u5f53\u524d\u5728\u7ebf\u72b6\u6001\n  // Get current online status\n  const isOnline = useOnlineStatus();\n  \n  return (\n    <div>\n      <h2>\u7f51\u7edc\u72b6\u6001 / Network Status</h2>\n      <div style={{ color: isOnline() ? 'green' : 'red' }}>\n        {isOnline() ? '\u5728\u7ebf / Online' : '\u79bb\u7ebf / Offline'}\n      </div>\n    </div>\n  );\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"api",children:"API"}),"\n",(0,t.jsx)(n.h3,{id:"\u8fd4\u56de\u503c--return-value",children:"\u8fd4\u56de\u503c / Return Value"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"React"}),": ",(0,t.jsx)(n.code,{children:"boolean"})," - \u8868\u793a\u5f53\u524d\u5728\u7ebf\u72b6\u6001\u7684\u5e03\u5c14\u503c (true \u8868\u793a\u5728\u7ebf\uff0cfalse \u8868\u793a\u79bb\u7ebf)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Vue"}),": ",(0,t.jsx)(n.code,{children:"Ref<boolean>"})," - \u5305\u542b\u5f53\u524d\u5728\u7ebf\u72b6\u6001\u7684\u54cd\u5e94\u5f0f\u5f15\u7528"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Solid"}),": ",(0,t.jsx)(n.code,{children:"() => boolean"})," - \u8fd4\u56de\u5f53\u524d\u5728\u7ebf\u72b6\u6001\u7684\u4fe1\u53f7\u8bbf\u95ee\u5668\u51fd\u6570"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"\u5b9e\u73b0\u7ec6\u8282--implementation-details",children:"\u5b9e\u73b0\u7ec6\u8282 / Implementation Details"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"useOnlineStatus"})," \u94a9\u5b50\u5728\u5185\u90e8\u4f7f\u7528\u4e86\u6d4f\u89c8\u5668\u7684 ",(0,t.jsx)(n.code,{children:"navigator.onLine"})," \u5c5e\u6027\u548c ",(0,t.jsx)(n.code,{children:"online"}),"/",(0,t.jsx)(n.code,{children:"offline"})," \u4e8b\u4ef6\u6765\u76d1\u542c\u7f51\u7edc\u72b6\u6001\u7684\u53d8\u5316\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"useOnlineStatus"})," hook internally uses the browser's ",(0,t.jsx)(n.code,{children:"navigator.onLine"})," property and the ",(0,t.jsx)(n.code,{children:"online"}),"/",(0,t.jsx)(n.code,{children:"offline"})," events to monitor changes in network status."]}),"\n",(0,t.jsx)(n.h3,{id:"react-\u5b9e\u73b0--react-implementation",children:"React \u5b9e\u73b0 / React Implementation"}),"\n",(0,t.jsxs)(n.p,{children:["\u5728 React \u4e2d\uff0c",(0,t.jsx)(n.code,{children:"useOnlineStatus"})," \u4f7f\u7528 ",(0,t.jsx)(n.code,{children:"useState"})," \u6765\u5b58\u50a8\u5f53\u524d\u7684\u5728\u7ebf\u72b6\u6001\uff0c\u5e76\u4f7f\u7528 ",(0,t.jsx)(n.code,{children:"useEffect"})," \u6765\u6dfb\u52a0\u548c\u79fb\u9664\u4e8b\u4ef6\u76d1\u542c\u5668\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:["In React, ",(0,t.jsx)(n.code,{children:"useOnlineStatus"})," uses ",(0,t.jsx)(n.code,{children:"useState"})," to store the current online status and ",(0,t.jsx)(n.code,{children:"useEffect"})," to add and remove event listeners."]}),"\n",(0,t.jsx)(n.h3,{id:"vue-\u5b9e\u73b0--vue-implementation",children:"Vue \u5b9e\u73b0 / Vue Implementation"}),"\n",(0,t.jsxs)(n.p,{children:["\u5728 Vue \u4e2d\uff0c",(0,t.jsx)(n.code,{children:"useOnlineStatus"})," \u4f7f\u7528 ",(0,t.jsx)(n.code,{children:"ref"})," \u6765\u521b\u5efa\u4e00\u4e2a\u54cd\u5e94\u5f0f\u7684\u5728\u7ebf\u72b6\u6001\u53d8\u91cf\uff0c\u5e76\u5728 ",(0,t.jsx)(n.code,{children:"onMounted"})," \u548c ",(0,t.jsx)(n.code,{children:"onUnmounted"})," \u751f\u547d\u5468\u671f\u94a9\u5b50\u4e2d\u5904\u7406\u4e8b\u4ef6\u76d1\u542c\u5668\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:["In Vue, ",(0,t.jsx)(n.code,{children:"useOnlineStatus"})," uses ",(0,t.jsx)(n.code,{children:"ref"})," to create a reactive variable for the online status and handles event listeners in the ",(0,t.jsx)(n.code,{children:"onMounted"})," and ",(0,t.jsx)(n.code,{children:"onUnmounted"})," lifecycle hooks."]}),"\n",(0,t.jsx)(n.h3,{id:"solid-\u5b9e\u73b0--solid-implementation",children:"Solid \u5b9e\u73b0 / Solid Implementation"}),"\n",(0,t.jsxs)(n.p,{children:["\u5728 Solid \u4e2d\uff0c",(0,t.jsx)(n.code,{children:"useOnlineStatus"})," \u4f7f\u7528 ",(0,t.jsx)(n.code,{children:"createSignal"})," \u6765\u521b\u5efa\u4e00\u4e2a\u4fe1\u53f7\u6765\u5b58\u50a8\u5728\u7ebf\u72b6\u6001\uff0c\u5e76\u4f7f\u7528 ",(0,t.jsx)(n.code,{children:"onMount"})," \u548c\u6e05\u7406\u51fd\u6570\u6765\u7ba1\u7406\u4e8b\u4ef6\u76d1\u542c\u5668\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:["In Solid, ",(0,t.jsx)(n.code,{children:"useOnlineStatus"})," uses ",(0,t.jsx)(n.code,{children:"createSignal"})," to create a signal for storing the online status and uses ",(0,t.jsx)(n.code,{children:"onMount"})," with a cleanup function to manage event listeners."]}),"\n",(0,t.jsx)(n.h2,{id:"\u6ce8\u610f\u4e8b\u9879--notes",children:"\u6ce8\u610f\u4e8b\u9879 / Notes"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["\u4e0d\u540c\u6d4f\u89c8\u5668\u68c0\u6d4b\u7f51\u7edc\u72b6\u6001\u7684\u65b9\u5f0f\u53ef\u80fd\u6709\u6240\u4e0d\u540c\uff0c",(0,t.jsx)(n.code,{children:"navigator.onLine"})," \u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u53ef\u80fd\u4e0d\u591f\u51c6\u786e\u3002"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["The way different browsers detect network status may vary, and ",(0,t.jsx)(n.code,{children:"navigator.onLine"})," might not be accurate in some cases."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"\u6b64\u94a9\u5b50\u4ec5\u68c0\u6d4b\u8bbe\u5907\u662f\u5426\u8fde\u63a5\u5230\u7f51\u7edc\uff0c\u4f46\u4e0d\u80fd\u786e\u4fdd\u4e92\u8054\u7f51\u8fde\u63a5\u662f\u6709\u6548\u7684\u3002"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"This hook only detects if the device is connected to a network but doesn't ensure that the internet connection is valid."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["\u5728 SSR (\u670d\u52a1\u5668\u7aef\u6e32\u67d3) \u73af\u5883\u4e2d\uff0c\u6b64\u94a9\u5b50\u4f1a\u9ed8\u8ba4\u8fd4\u56de ",(0,t.jsx)(n.code,{children:"true"})," (\u8868\u793a\u5728\u7ebf)\uff0c\u56e0\u4e3a\u670d\u52a1\u5668\u73af\u5883\u65e0\u6cd5\u8bbf\u95ee\u6d4f\u89c8\u5668 API\u3002"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["In SSR (Server-Side Rendering) environments, this hook will default to ",(0,t.jsx)(n.code,{children:"true"})," (online) as browser APIs are not accessible in server environments."]}),"\n"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>r});var t=s(6540);const i={},l=t.createContext(i);function o(e){const n=t.useContext(l);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);